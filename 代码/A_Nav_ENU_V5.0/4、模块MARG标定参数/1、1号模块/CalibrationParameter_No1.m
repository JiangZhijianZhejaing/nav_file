%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
% function：1号模块传感器标定系数
%
% By Taoran Zhao
% 2023/04/27 2023/05/06 2023/05/18 2023/05/23 2023/06/01
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%% ---------------一、全局变量声明---------------
global CalibrationParameter
%% ---------------二、陀螺仪---------------
% CalibParm.Wp = [ 0.01428,   0,          0;
% 0,         0.01428,    0;
% 0,         0,          0.01428 ;
% 0.1267456,   -0.03358656,   -0.19572593];    % From LinWei -- False

% CalibParm.Wp = [0.014279067939652 0.000239224917909 0.000073473395059;
% 0.000096087683480 0.014291699581323 -0.000017819535763;
% 0.000140494075027 0.000139608582850 0.014251154812473;
% 0.509724417402251 -0.085143783954372 -0.147830056118551]; % From Mr.Lin

% CalibParm.Wp = [   0.014358082423047   0.000377359351077  -0.000068042732520;
% 0.000944028314729   0.014335802957671   0.000075223095768;
% 0.000102270581965  -0.000132690076971   0.014280864333475;
% 0.373607331196188  -0.802399887142548   0.834184038092179;]; % 2023/05/31 -- 使用转台夹具

CalibrationParameter.Wp = [0.014355067070491   0.000389664835328   0.000001793453935;
0.000854383490102   0.014357494687847  -0.000103115368430;
0.000105363254355  -0.000130249899520   0.014284788577390;
0.374971105639152  -0.753032246905980   0.860562995954857;];  % 2023/06/01 -- 胶带缠转台表面

% -------------------------------------------------------------------------
CalibrationParameter.Wp(4,:) = zeros(1,3);    % 由于偏置一段时间后会变，故标定矩阵偏置取零，开机后静置取平均扣除   
%% ---------------三、加速度计---------------            
% CalibParm.p =[  0.002936044831444,    -0.000069659763204,   0.000003047502876;
% -0.000027288562255,     0.002954592428102,  -0.000003332489007;
% -0.000002374542985,     0.000000024867615,   0.002836840268263;
% -0.021613768584109,    -0.013750023176076,  -0.090387958192135 ];      % 2023/03/01

% CalibParm.p =[  0.002942320687044,  -0.000069034969173,  -0.000001083567113;
% -0.000031970642121,   0.002954288226224,   0.000004778925888;
% -0.000002169041334,   0.000000055455356,   0.002839917226137;
% -0.021895939471969,  -0.010774631058635,  -0.093986191559378 ]; % 2023/05/23

CalibrationParameter.P = [   0.002940891371015,  -0.000066332065999,   0.000002359860866;
  -0.000031750834874,   0.002955248444513,   0.000001143085301;
  -0.000002963564943,  -0.000000709025418,   0.002840566543008;
  -0.021454928910303,  -0.013290395779160,  -0.089728050010740;];   % 2023/05/30 -- 使用转台夹具
%% ---------------四、磁传感器Mb---------------
% CalibrationParameter.Mb = 1e-3*[  0.339015316769180,    0.002666634341711,   -0.000338587306002;
% -0.003038456801371,    0.343320028449821,   -0.018832219328681;
% 0.001315514198601,   -0.003893715749920,    0.333843696676534 ];
% CalibrationParameter.Mb = [0.000308264583200971 2.56082492799282e-06 -3.03747994667494e-07
% -2.73011462723326e-06 0.000325790987014681 -1.66942823963177e-05
% 1.21735523614107e-06 -3.80538097043750e-06 0.000304791888945235];
% CalibrationParameter.Mb = [0.000303377801210943 2.53351705737968e-06 -2.99924915695128e-07;
% -2.68683532848107e-06 0.000322316849433828 -1.64841622931119e-05;
% 1.19805704242168e-06 -3.76480152666589e-06 0.000300955671152753];
% CalibrationParameter.Mb =[0.000304567845571578 2.58942413575272e-06 -2.99167232981796e-07;
% -2.69737483802280e-06 0.000329429409939295 -1.64425193212891e-05;
% 1.20275659862310e-06 -3.84787933875212e-06 0.000300195384502399];
CalibrationParameter.Mb = 1e-3*[0.325145292394282   0.002557535190466  -0.000324734792694;
  -0.003143422350366   0.355180251458728  -0.019482791105689;
   0.001261959370713  -0.003735201856985   0.320252857644940];
%% ---------------五、磁传感器B---------------
% CalibrationParameter.B = [275.092643573850 104.679989782524 11.9953929424048];
% CalibrationParameter.B = [287.210292189017 104.417690434969 9.67642392803942];
% CalibrationParameter.B =[283.787074728852 159.617653855726 4.40165469759496];
CalibrationParameter.B =[284.9047,160.6878,31.6176];
%% ---------------六、磁传感器R---------------
CalibrationParameter.R = [ 0.09859264,   0.01561222,   0.01143196 ];






